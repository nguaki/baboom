<?php
	session_start();
	require_once "../common/dependency.php";
?>
<!DOCTYPE html>
<!---------------------------------------------------------------->
<!- FILE: owner_reset_password_front_end.php                      ->
<!-                                                               ->
<!- DESCRIPTION: THis page is for resetting the password.         ->
<!-              This is useful when a user forgets the password. ->
<!-                                                               ->
<!-                                                               ->
<!-                                                               ->
<!-                                                               ->
<!-                                                               ->
<!-                                                               ->
<!-WHO      WHEN          WHAT                                    ->
<!------    -------       -------------------------------------   ->
<!-         06-10-15      Copied and modified from owner_login_   ->
<!-                       register.php.                           ->
<!-                                                               ->
<!-                                                               ->
<!-                                                               ->
<!-                                                               ->
<!-                                                               ->
<!---------------------------------------------------------------->
<html lang="en" ng-app>
<head>
  <meta charset="utf-8">
  <title>4BABOOM.COM - Owner Login or Register</title>

  <script>
        function validateConfirmPassword() 
        {
                var pass1 = document.getElementById("new_password1").value;
                var pass2 = document.getElementById("new_password2").value;
                var ok = true;
                if (pass1 != pass2) 
                {
                        //alert("Passwords Do not match");
                        document.getElementById("new_password1").style.borderColor = "#E34234";
                        document.getElementById("new_password2").style.borderColor = "#E34234";
                        document.getElementById("owner_reset_password_confirm_error").innerHTML="this password does not match!";
                        ok = false;
                }
                else 
		{
                        //alert("Passwords Match!!!");
                        document.getElementById("new_password1").style.borderColor = "#CCC";
                        document.getElementById("new_password2").style.borderColor = "#CCC";
                        document.getElementById("owner_reset_password_confirm_error").innerHTML="";
                }
                return ok;
        }
  </script>
  <script>
        function recover_password() 
        {
                //alert( "hello" );
                var xmlhttp = new XMLHttpRequest();
                xmlhttp.onreadystatechange = function() 
                {
                        <!--This is where the returned string gets received -->
                        <!--from the php backend and sets the value in the  -->
                        <!-- placeholder in the html.                       -->
                        <!--Not sure what these state and status mean.      -->
                        if (xmlhttp.readyState == 4 && xmlhttp.status == 200) 
                        {
                                document.getElementById("login_message").innerHTML = xmlhttp.responseText;
			 	if( xmlhttp.responseText == "You will receive a temporary password via email." )
				{
					// Changes to a new web location.
					window.location = ('http://54.67.1.138/owner/owner_login_register.php');	
					// Give a promt to a user.
					alert( "Please login with the new temporary password." );
				}

                         }
                 }
                 <!--Send the request to the backend php script.  -->
                 var email = document.getElementById("owner_email").value;
                 var token = document.getElementById("owner_token").value;
		 var clean_token = encodeURIComponent(token);

                 str = email + "|" + clean_token;    <!-- 03-15-15 pass token -->
                 //alert( str );
                 xmlhttp.open("POST", "owner_recover_password.php?q="+str, true);
                 xmlhttp.send();
        }
</script>

  <?php include( '../common/header.php' );?>
</head>

<body>
        <div class="headercontainer">
                <?php include( '../common/owner_navigation.php' );?>
        </div>
<!-- Owner Login or Register Start -->

<!-- Login Form -->

<div class="container">
  <h3><span class="glyphicon glyphicon-heart"></span>Lets reset your password.-</h3>
  <br>
  <br>

<!--<h4><span class="glyphicon glyphicon-log-in"></span><b> </b>Please fill in the email...<h4> -->
<form method="post" class="form-horizontal" action="owner_reset_password.php">
  <div class="form-group">
    <h4><label for="old_password" class="col-sm-2 control-label">temporary password:</label><h4>
    <div class="col-sm-4">
      <input type="password" class="form-control" id="old_password" name="old_password" placeholder="password">
    </div>
    <br>
	<br>

	<h4><label for="new_password1" class="col-sm-2 control-label">new password:</label><h4>
    <div class="col-sm-4">
      <input type="password" class="form-control" id="new_password1" name="new_password1" placeholder="password">
    </div>
    <br>
	<br>
    
	<h4><label for="new_password2" class="col-sm-2 control-label">confirm password:</label><h4>
    <div class="col-sm-4">
      <input type="password" class="form-control" id="new_password2" name="new_password2" placeholder="password">
    </div>
   </div>
  <div class="form-group">
    
  <div class="col-sm-offset-2 col-sm-10">
    <button ng-disabled="" type="submit" class="btn btn-primary">Login</button>
    <span id="owner_reset_password_confirm_error"></span>
  </div>
</form>
<br>
<br>



<!-- Owner Login or Register End -->
 <?php include ( '../common/owner_trailer' ); ?>
 <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.25/angular.min.js"></script>

</body>
</html>
